@page "/Kitchen/Recipes/{RecipeId:guid}/Edit"

@using HomeBook.Frontend.Core.Icons
@using HomeBook.Frontend.Module.Kitchen.Contracts

@inject IRecipeService RecipeService
@inject NavigationManager NavigationManager
@inject ISnackbar Snackbar

@if (!_isLoading
     && _recipe != null)
{
    <MudContainer>

        <MudPaper Class="frosted-b6 text-dark mb-5 pa-3 rounded-pill">

            <MudToolBar Dense="true"
                        Class="px-0">

                <MudTooltip Color="Color.Primary"
                            Text="+View Recipe">
                    <MudIconButton Icon="@HomeBookIcons.Icons8.Windows11.Outline.RestaurantMenu"
                                   Href="@string.Format("/Kitchen/Recipes/{0}/View", RecipeId)"
                                   Color="Color.Primary"/>
                </MudTooltip>

                <MudSpacer/>

                <MudText Typo="Typo.h5">
                    @_recipe.Name
                </MudText>

                <MudSpacer/>

                <MudTooltip Color="Color.Error"
                            Text="+Delete Recipe">
                    <MudIconButton Icon="@HomeBookIcons.Icons8.Windows11.Outline.Trash"
                                   OnClick="DeleteRecipe"
                                   Color="Color.Error"/>
                </MudTooltip>

            </MudToolBar>

        </MudPaper>

        <MudPaper Class="frosted-b8 text-dark mb-5 pa-3">

            <MudTextField T="string"
                          Value="@_recipe.Description"
                          Label="+Beschreibung"
                          Variant="Variant.Outlined"
                          Lines="5"/>

            <MudPaper Class="frosted-b1 text-dark mt-5 pa-3">

                <MudToolBar Dense="true"
                            Class="px-0">

                    @switch (_recipe.Servings)
                    {
                        case 1:
                            <MudText Typo="Typo.body1">
                                +Für 1 Portion
                            </MudText>
                            break;
                        default:
                            <MudText Typo="Typo.body1">
                                +Für <b>@_recipe.Servings</b> Portionen
                            </MudText>
                            break;
                    }


                    <MudSpacer/>

                    <UiNumericGroup @bind-Value="@_recipe.Servings"
                                    Min="1"
                                    Step="1"/>

                </MudToolBar>

            </MudPaper>

        </MudPaper>

        <MudPaper Class="frosted-b8 text-dark mb-5">

            <MudList T="string">

                @code{

                    string[] entries = new string[]
                    {
                        "1 Tasse Mehl",
                        "2 Eier",
                        "200ml Milch"
                    };

                }

                @foreach (var entry in entries)
                {
                    <MudListItem T="string"
                                 Dense="true">

                        <div class="d-flex align-center justify-space-between flex-grow-1 gap-3">

                            <MudIconButton Icon="@HomeBookIcons.Icons8.Windows11.Outline.Multiply"/>

                            <div class="d-flex flex-column flex-grow-1">
                                <MudText Class="flex-grow-1" Typo="Typo.h6">@entry</MudText>
                                <MudText Class="flex-grow-1" Typo="Typo.caption">@entry</MudText>
                            </div>

                            <MudIconButton Icon="@HomeBookIcons.Icons8.Windows11.Outline.EditPencil"/>
                            <MudIconButton Icon="@HomeBookIcons.Icons8.Windows11.Outline.Menu"/>

                        </div>

                    </MudListItem>
                }

            </MudList>

        </MudPaper>

        <MudButton Color="Color.Primary"
                   Variant="Variant.Filled"
                   OnClick="SaveRecipe">
            +save
        </MudButton>

    </MudContainer>
}

<MudContainer>

    @if (_isLoading)
    {
        <div class="d-flex justify-center">
            <MudProgressCircular Color="Color.Primary"
                                 Indeterminate="true"/>
        </div>
    }

    @if (!_isLoading)
    {
    }

</MudContainer>
