@page "/Settings/Modules"
@using HomeBook.Frontend.Abstractions.Contracts
@using HomeBook.Frontend.Modules.Abstractions

@inject IEnumerable<IModule> RegisteredModules
@inject IWidgetFactory WidgetFactory

<MudContainer Class="mt-4">

    <MudGrid>

        <MudItem xs="12" sm="12" md="4" lg="3" xl="3" xxl="3">

            <SettingsNavMenu/>

        </MudItem>

        <MudItem xs="12" sm="12" md="8" lg="9" xl="9" xxl="9">

            <MudPaper Class="d-flex align-center justify-center mud-width-full py-8">
                <MudText Typo="Typo.h5">registered modules</MudText>
            </MudPaper>

            <MudPaper Class="mt-5">

                <MudList T="string">
                    @foreach (IModule? module in _registeredModules)
                    {
                        <MudListItem Text="@module.Name"
                                     Icon="@module.Icon"/>
                    }
                </MudList>

            </MudPaper>

            <MudPaper Class="d-flex align-center justify-center mud-width-full py-8 mt-5">
                <MudText Typo="Typo.h5">available widgets</MudText>
            </MudPaper>

            <MudPaper Class="mt-5">

                <MudList T="string">

                    @foreach (KeyValuePair<IModule, IEnumerable<string>> widgetModule in _availableWidgets)
                    {
                        foreach (string widgetName in widgetModule.Value)
                        {
                            <MudListItem Text="@string.Format(widgetModule.Key.Name + " - " + widgetName)"
                                         Icon="@widgetModule.Key.Icon"/>
                        }
                    }

                </MudList>

            </MudPaper>

        </MudItem>

    </MudGrid>

</MudContainer>
