@page "/Settings/Modules"
@using HomeBook.Frontend.Abstractions.Contracts
@using HomeBook.Frontend.Modules.Abstractions

@inject IEnumerable<IModule> RegisteredModules
@inject IWidgetFactory WidgetFactory

<MudContainer>

    <MudGrid>

        <MudItem xs="12" sm="12" md="4" lg="3" xl="3" xxl="3">

            <SettingsNavMenu/>

        </MudItem>

        <MudItem xs="12" sm="12" md="8" lg="9" xl="9" xxl="9">

            <MudPaper Class="d-flex align-center justify-center mud-width-full py-8">
                <MudText Typo="Typo.h5">registered modules</MudText>
            </MudPaper>

            <MudPaper Class="mt-5">

                <MudList T="string">
                    @foreach (IModule? module in _registeredModules)
                    {
                        <UiDetailListItem Icon="@module.Icon"
                                          IconSize="Size.Large">

                            <UiDetailListItemTitle>
                                <MudText Typo="Typo.h6">
                                    @string.Format($"{module.Name} v{module.Version}")
                                </MudText>
                            </UiDetailListItemTitle>

                            <UiDetailListItemCaption>
                                <MudText Typo="Typo.caption">
                                    @module.Description
                                </MudText>
                                <MudText Typo="Typo.overline">
                                    (by @module.Author)
                                </MudText>
                            </UiDetailListItemCaption>

                        </UiDetailListItem>
                    }
                </MudList>

            </MudPaper>

            <MudPaper Class="d-flex align-center justify-center mud-width-full py-8 mt-5">
                <MudText Typo="Typo.h5">available widgets</MudText>
            </MudPaper>

            <MudPaper Class="mt-5">

                <MudList T="string">

                    @foreach (KeyValuePair<IModule, IEnumerable<string>> widgetModule in _availableWidgets)
                    {
                        foreach (string widgetName in widgetModule.Value)
                        {
                            <UiDetailListItem Icon="@widgetModule.Key.Icon"
                                              IconSize="Size.Large">

                                <UiDetailListItemTitle>
                                    <MudText Typo="Typo.h6">
                                        @widgetName
                                    </MudText>
                                </UiDetailListItemTitle>

                                <UiDetailListItemCaption>
                                    <MudText Typo="Typo.caption">
                                        @widgetModule.Key.Name
                                    </MudText>
                                </UiDetailListItemCaption>

                            </UiDetailListItem>
                        }
                    }

                </MudList>

            </MudPaper>

        </MudItem>

    </MudGrid>

</MudContainer>
